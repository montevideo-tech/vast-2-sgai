<script src="./js/hls.js/hls.js"></script>

<video id="video" controls></video>

<script>
  if (Hls.isSupported()) {
    var video = document.getElementById('video');
    var hls = new Hls({
      enableInterstitialPlayback: true,
      interstitialAppendInPlace: true,
      interstitialLiveLookAhead: 20
    });

    hls.on(Hls.Events.MEDIA_ATTACHED, function () {
      console.log('video and hls.js are now bound together !');
    });

    hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {
      console.log(
        'manifest loaded, found ' + data.levels.length + ' quality level',
      );
    });

    hls.on(Hls.Events.INTERSTITIALS_UPDATED, (event, data) => {
      console.log('INTERSTITIALS_UPDATED', data);
    });

    hls.on(Hls.Events.INTERSTITIALS_BUFFERED_TO_BOUNDARY, (event, data) => {
      console.log('INTERSTITIALS_BUFFERED_TO_BOUNDARY', data);
      console.log("hls interstitialsManager", hls.interstitialsManager)
    });

    hls.on(Hls.Events.ASSET_LIST_LOADING, (event, data) => {
      console.log('ASSET_LIST_LOADING', data);
    });

    hls.on(Hls.Events.ERROR, (event, data) => {
      console.log('ERROR', data);
    });

    hls.on(Hls.Events.INTERSTITIAL_ASSET_PLAYER_CREATED, (event, data) => {
      console.log('INTERSTITIAL_ASSET_PLAYER_CREATED', data);
    });

    hls.on(Hls.Events.ASSET_LIST_LOADED, (event, data) => {
      console.log('ASSET_LIST_LOADED', data);
    });
    
    hls.on(Hls.Events.INTERSTITIAL_STARTED, (event, data) => {
      console.log('INTERSTITIAL_STARTED', data);
    });

    hls.on(Hls.Events.INTERSTITIAL_ENDED, (event, data) => {
      console.log('INTERSTITIAL_ENDED', data);
    });

    hls.on(Hls.Events.INTERSTITIAL_ASSET_STARTED, (event, data) => {
      console.log('INTERSTITIAL_ASSET_STARTED', data);
    });

    hls.on(Hls.Events.INTERSTITIAL_ASSET_ENDED, (event, data) => {
      console.log('INTERSTITIAL_ASSET_ENDED', data);
    });

    hls.on(Hls.Events.INTERSTITIALS_PRIMARY_RESUMED, (event, data) => {
      console.log('INTERSTITIALS_PRIMARY_RESUMED', data);
    });

    hls.on(Hls.Events.INTERSTITIAL_ASSET_ERROR, (event, data) => {
      console.log('INTERSTITIAL_ASSET_ERROR', data);
    });

    hls.loadSource('/assets/main.m3u8?user=1234&content=abc');

    hls.attachMedia(video);

  }
</script>